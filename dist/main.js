(()=>{"use strict";const e=(()=>{function e(){t.domElements.popup.classList.remove("show")}function o(){t.domElements.popup.setAttribute("class","show hide"),t.domElements.header.classList.remove("blur"),t.domElements.content.classList.remove("blur"),setTimeout(e,200)}return{closeForm:o,showForm:function(){t.domElements.popup.setAttribute("class","show"),t.domElements.content.setAttribute("class","blur"),t.domElements.header.setAttribute("class","blur")},closeFormButton:function(){console.log(document.getElementById("project-name-in").value),document.getElementById("project-name-in").innerText="",document.getElementById("due-date-in").value="",document.getElementById("priority-in").value="",o()}}})(),t={domElements:{popup:document.getElementById("form-pop"),header:document.getElementById("header"),content:document.getElementById("content"),addNewButton:document.getElementById("add-new-button"),closeButton:document.getElementById("close-form")}};function o(){const e=this.id.slice(3);if(d.projectLogic.currentProject===e){d.domElements.contentArea.setAttribute("class","unclickable"),d.domElements.projectHeaderTitle.textContent="Select a project",d.domElements.projectHeaderDate.textContent="",d.domElements.projectChecklist.innerHTML="",d.domElements.projectDescription.textContent="",d.domElements.projectNotes.textContent="",d.domElements.lowPrioCheckbox.checked=!1,d.domElements.medPrioCheckbox.checked=!1,d.domElements.highPrioCheckbox.checked=!1;try{document.getElementById("enter-button").remove()}catch{}}delete d.projectLogic.projectArray[e];const t=this.parentNode.parentNode.childNodes,o=Array.from(t);o.filter((e=>e)),2==o.length&&this.parentNode.parentNode.remove(),this.parentNode.remove(),localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray)),localStorage.setItem("currentSidebar",JSON.stringify(document.getElementById("dates-container").innerHTML))}const c={domElements:{projectNameIn:document.getElementById("project-name-in"),dueDateIn:document.getElementById("due-date-in"),priorityIn:document.getElementById("priority-in"),addButton:document.getElementById("add-button"),dateList:document.getElementById("dates-container")}},r=(()=>{let t=0;const r=localStorage.getItem("currentId");function n(e,t){const o=document.getElementById(`indicator${t}`);"low"===e.value?(console.log("low",t),o.setAttribute("class","prio-indicator blue")):"med"===e.value?(console.log("med",t),o.setAttribute("class","prio-indicator yellow")):"high"===e.value&&(console.log("high",t),o.setAttribute("class","prio-indicator red"))}return r&&(t=r),{handleCreateListing:function(){""!==c.domElements.projectNameIn.value&&""!==c.domElements.dueDateIn.value&&""!==c.domElements.priorityIn.value&&(function(){if(!c.domElements.dateList.innerHTML.includes(c.domElements.dueDateIn.value)){let r=document.createElement("div");r.setAttribute("class","date-sub-header subtitle"),r.setAttribute("id",c.domElements.dueDateIn.value),r.innerText=c.domElements.dueDateIn.value,c.domElements.dateList.appendChild(r);var e=c.domElements.dateList.childNodes,t=[];for(var o in e)1==e[o].nodeType&&t.push(e[o]);for(t.sort((function(e,t){return e.innerHTML==t.innerHTML?0:e.innerHTML>t.innerHTML?1:-1})),o=0;o<t.length;++o)c.domElements.dateList.appendChild(t[o])}}(),l.addNewProject(t),function(){let r=document.getElementById(c.domElements.dueDateIn.value);const i=document.createElement("div");i.setAttribute("class","list-item"),r.appendChild(i),console.log(c.domElements.dueDateIn.value);const d=document.createElement("button");d.setAttribute("class","project sidebar-button"),d.setAttribute("id",`${t}`),d.innerText=c.domElements.projectNameIn.value,d.addEventListener("click",s,!1),i.appendChild(d);const l=document.createElement("div");l.setAttribute("class","prio-indicator"),l.setAttribute("id",`indicator${t}`),d.insertBefore(l,d.firstChild),n(c.domElements.priorityIn,t);let a=document.createElement("button");a.setAttribute("class","delete-button"),a.setAttribute("id",`del${t}`),a.innerHTML='<img src="/dist/images/trash.svg" class="trash-can">',a.addEventListener("click",o,!1),i.appendChild(a),t++,localStorage.setItem("currentId",t),e.closeForm()}(),localStorage.setItem("currentSidebar",JSON.stringify(document.getElementById("dates-container").innerHTML)))},setPrioIndicator:n}})(),n=(()=>{const e=document.getElementsByClassName("check-button");function t(){const t=document.getElementById(d.projectLogic.currentProject);let o=0;for(const c of e)c.checked?(o++,o===e.length&&(t.setAttribute("class","sidebar-button project green"),localStorage.setItem("currentSidebar",JSON.stringify(document.getElementById("dates-container").innerHTML)))):(t.setAttribute("class","sidebar-button project"),localStorage.setItem("currentSidebar",JSON.stringify(document.getElementById("dates-container").innerHTML)))}return{checkCheckboxes:t,saveCheckboxes:function(){d.projectLogic.projectArray[d.projectLogic.currentProject].checkboxState=[];for(const t of e)t.checked?(d.projectLogic.projectArray[d.projectLogic.currentProject].checkboxState.push("checked"),localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray))):(d.projectLogic.projectArray[d.projectLogic.currentProject].checkboxState.push("unchecked"),localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray)))},setCheckboxes:function(){var o=0;for(const c of e)c.addEventListener("change",t,!1),"checked"===d.projectLogic.projectArray[d.projectLogic.currentProject].checkboxState[o]&&(console.log("working"),c.checked=!0,console.log(c.checked)),o++},checklistDel:function(){this.parentNode.remove(),d.projectLogic.projectArray[d.projectLogic.currentProject].checklist=d.domElements.projectChecklist.innerHTML,localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray)),t()}}})();function i(e,t){if(!t){const c=e;let r=e.thisSection,i=e.thisProperty;function s(){const e=document.createElement("div");e.setAttribute("class","checklist-item"),d.domElements.projectChecklist.appendChild(e);const t=document.createElement("label");t.setAttribute("class","checkbox-container"),e.appendChild(t);const o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("class","check-button"),t.appendChild(o),o.addEventListener("change",n.checkCheckboxes,!1);const c=document.createElement("span");c.setAttribute("class","checkmark"),t.appendChild(c);let s=document.createElement("div");s.setAttribute("class","project-text"),e.appendChild(s),r=s,i="checklist";const l=document.createElement("button");l.innerHTML='<img src="/dist/images/trash.svg" class="trash-can">',l.setAttribute("class","check-del del-button"),l.addEventListener("click",n.checklistDel,!1),e.appendChild(l)}if(function(e,t){var o=document.createElement("button");const c=e.parentNode.children[1];o.setAttribute("class","enter-button"),o.setAttribute("id","enter-button"),o.textContent="Enter",e.parentNode.insertBefore(o,c),o.addEventListener("click",t,!1)}(c,a),d.projectLogic.checklistBool)s();else{var o=r.textContent;r.textContent=""}let l=document.createElement("textarea");function a(){r.textContent=l.value,d.projectLogic.checklistBool?(console.log(d.projectLogic.projectArray[d.projectLogic.currentProject]),d.projectLogic.projectArray[d.projectLogic.currentProject][i]=d.domElements.projectChecklist.innerHTML,n.checkCheckboxes()):(console.log(d.projectLogic.currentProject),d.projectLogic.projectArray[d.projectLogic.currentProject][i]=l.value),this.remove(),l.remove(),d.projectLogic.executed=!1,d.projectLogic.checklistBool=!1,localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray))}l.setAttribute("class","text-area"),r.appendChild(l),l.textContent=o,t=!0}}function s(){if(d.projectLogic.currentProject)try{n.saveCheckboxes()}catch{}d.domElements.contentArea.setAttribute("class",""),d.projectLogic.currentProject=this.id;let e=!1;if(l.updateDom(),n.setCheckboxes(),d.domElements.notesEdit.thisSection=d.domElements.projectNotes,d.domElements.notesEdit.thisProperty="notes",d.domElements.descriptionEdit.thisSection=d.domElements.projectDescription,d.domElements.descriptionEdit.thisProperty="description",d.projectLogic.applyEventListeners){d.domElements.notesEdit.addEventListener("click",(function(){i(this,e)}),!1),d.domElements.descriptionEdit.addEventListener("click",(function(){i(this,e)}),!1),d.domElements.checklistEdit.addEventListener("click",(function(){d.projectLogic.checklistBool=!0,i(this,e)}),!1),d.projectLogic.applyEventListeners=!1;for(const e of d.domElements.prioButtons)e.addEventListener("click",(function(){r.setPrioIndicator(this,d.projectLogic.currentProject),d.projectLogic.projectArray[d.projectLogic.currentProject].priority=this.value,localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray)),localStorage.setItem("currentSidebar",JSON.stringify(document.getElementById("dates-container").innerHTML))}))}l.selectRadioButton(d.projectLogic.currentProject)}const d={domElements:{projectHeaderTitle:document.getElementById("project-header-subtitle"),projectHeaderDate:document.getElementById("project-date"),projectChecklist:document.getElementById("checklist-text"),projectDescription:document.getElementById("description-text"),projectNotes:document.getElementById("notes-text"),projectPriority:document.getElementById("priority"),lowPrioCheckbox:document.getElementById("low-prio"),medPrioCheckbox:document.getElementById("medium-prio"),highPrioCheckbox:document.getElementById("high-prio"),prioButtons:document.getElementsByClassName("prio-button"),descriptionEdit:document.getElementById("description-edit"),notesEdit:document.getElementById("notes-edit"),checklistEdit:document.getElementById("checklist-edit"),contentArea:document.getElementById("project-content")},projectLogic:{projectArray:[],applyEventListeners:!0,currentProject:null,checklistBool:!1}},l=(()=>{function e(e,t,o,c,r,n,i){this.checkboxState=e,this.title=t,this.dueDate=o,this.checklist=c,this.description=r,this.notes=n,this.priority=i}function t(t,o,c,r,n,i,s){const l=new e(t,o,c,r,n,i,s);d.projectLogic.projectArray.push(l),localStorage.setItem("currentArray",JSON.stringify(d.projectLogic.projectArray))}return{selectRadioButton:function(e){"low"===d.projectLogic.projectArray[e].priority?d.domElements.lowPrioCheckbox.checked=!0:"med"===d.projectLogic.projectArray[e].priority?d.domElements.medPrioCheckbox.checked=!0:"high"===d.projectLogic.projectArray[e].priority&&(d.domElements.highPrioCheckbox.checked=!0)},addProjectToArray:t,addNewProject:function(){t([],c.domElements.projectNameIn.value,c.domElements.dueDateIn.value,null,null,null,c.domElements.priorityIn.value)},updateDom:function(){d.domElements.projectHeaderTitle.textContent=d.projectLogic.projectArray[d.projectLogic.currentProject].title,d.domElements.projectHeaderDate.textContent=d.projectLogic.projectArray[d.projectLogic.currentProject].dueDate,d.domElements.projectChecklist.innerHTML=d.projectLogic.projectArray[d.projectLogic.currentProject].checklist,d.domElements.projectDescription.textContent=d.projectLogic.projectArray[d.projectLogic.currentProject].description,d.domElements.projectNotes.textContent=d.projectLogic.projectArray[d.projectLogic.currentProject].notes;const e=document.getElementsByClassName("check-del");for(const t of e)t.addEventListener("click",n.checklistDel,!1)}}})();d.domElements.lowPrioCheckbox.checked=!1,d.domElements.medPrioCheckbox.checked=!1,d.domElements.highPrioCheckbox.checked=!1,(()=>{if(localStorage.currentArray){const e=localStorage.getItem("currentArray");d.projectLogic.projectArray=JSON.parse(e)}const e=localStorage.getItem("currentSidebar");document.getElementById("dates-container").innerHTML=JSON.parse(e);const t=document.getElementsByClassName("project");for(const e of t)e.addEventListener("click",s,!1);const c=document.getElementsByClassName("delete-button");for(const e of c)e.addEventListener("click",o,!1)})(),c.domElements.addButton.addEventListener("click",r.handleCreateListing,!1),t.domElements.closeButton.addEventListener("click",e.closeFormButton,!1),t.domElements.addNewButton.addEventListener("click",e.showForm,!1)})();